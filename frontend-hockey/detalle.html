<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Detalle del Implemento</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body {
      margin: 0;
      background: #ffffff;
      font-family: Arial, sans-serif;
      color: #222;
    }

    .main-container {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      padding: 2rem;
    }

    .image-section {
      flex: 1;
      min-width: 300px;
      max-width: 50%;
    }

    .main-img {
      width: 100%;
      height: auto;
      max-height: 400px;
      object-fit: contain;
      border-radius: 10px;
      border: 1px solid #ccc;
    }

    .details {
      flex: 1;
      min-width: 300px;
    }

    .details h1 {
      margin-top: 0;
      font-size: 2rem;
    }

    .stars {
      font-size: 1.2rem;
      color: #fbc02d;
      margin-bottom: 0.8rem;
    }

    .info p {
      margin: 0.3rem 0;
      font-size: 1rem;
    }

    .related,
    .comments {
      padding: 2rem;
      border-top: 1px solid #ccc;
    }

    .related h3,
    .comments h3 {
      font-size: 1.3rem;
      margin-bottom: 1rem;
    }

    .related-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 1.2rem;
    }

    .related-item {
      border: 1px solid #ddd;
      padding: 1rem;
      border-radius: 6px;
      background: #fff;
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .related-item:hover {
      transform: scale(1.03);
    }

    .related-item img {
      width: 100%;
      height: 120px;
      object-fit: contain;
      margin-bottom: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .comments textarea {
      width: 100%;
      height: 100px;
      padding: 1rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1rem;
      resize: vertical;
    }

    .comments button {
      margin-top: 0.8rem;
      padding: 0.6rem 1.2rem;
      background-color: #b71c1c;
      color: white;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }

    .comment-list {
      margin-top: 1.5rem;
    }

    .comment-item {
      border-left: 3px solid #b71c1c;
      padding-left: 1rem;
      margin-bottom: 1rem;
      font-size: 0.95rem;
    }

    .volver {
      display: block;
      text-align: center;
      margin: 2rem;
      font-weight: bold;
      color: #222;
      text-decoration: none;
    }
  </style>
</head>
<body>

  <!-- Navbar completa -->
  <div id="navbar-container"></div>

  <main>
    <div class="main-container">
      <div class="image-section">
        <img id="main-img" class="main-img" src="https://via.placeholder.com/400x300?text=Sin+imagen" alt="Imagen del implemento" />
      </div>
      <div class="details">
        <h1 id="nombre">Nombre del implemento</h1>
        <div class="stars" id="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ</div>
        <div class="info">
          <p id="desc">Descripci√≥n del implemento</p>
          <p><strong>Club:</strong> <span id="club"></span></p>
          <p><strong>Pista:</strong> <span id="pista"></span></p>
        </div>
      </div>
    </div>

    <div class="related">
      <h3>Otros implementos similares</h3>
      <div class="related-grid">
        <div class="related-item" onclick="goToDetalle('Stick Pro')">
          <img src="https://via.placeholder.com/200x120?text=Stick+Pro" alt="Stick Pro" />
          <h4>Stick Pro</h4>
        </div>
        <div class="related-item" onclick="goToDetalle('Casco X')">
          <img src="https://via.placeholder.com/200x120?text=Casco+X" alt="Casco X" />
          <h4>Casco X</h4>
        </div>
        <div class="related-item" onclick="goToDetalle('Guantes Y')">
          <img src="https://via.placeholder.com/200x120?text=Guantes+Y" alt="Guantes Y" />
          <h4>Guantes Y</h4>
        </div>
      </div>
    </div>

    <div class="comments">
      <h3>Rese√±as y comentarios</h3>
      <textarea id="comentario" placeholder="Escribe tu comentario..."></textarea>
      <button onclick="publicarComentario()">Publicar</button>
      <div class="comment-list" id="comentarios-publicados"></div>
    </div>

    <a href="index.html" class="volver">‚Üê Volver al inicio</a>
  </main>

  <script>
    function goToDetalle(nombre) {
      const encoded = encodeURIComponent(nombre);
      window.location.href = `detalle.html?nombre=${encoded}`;
    }

    const data = {
      "Guantes X": {
        img: "https://via.placeholder.com/400x300?text=Guantes+X",
        nombre: "Guantes X",
        desc: "Guantes acolchados con protecci√≥n reforzada para el portero.",
        estado: 4,
        club: "Rinos",
        pista: "Pista Sur"
      },
      "Casco Pro": {
        img: "https://via.placeholder.com/400x300?text=Casco+Pro",
        nombre: "Casco Pro",
        desc: "Casco reforzado con visera.",
        estado: 5,
        club: "Avalancha",
        pista: "Pista Norte"
      },
      "Stick Pro": {
        img: "https://via.placeholder.com/400x300?text=Stick+Pro",
        nombre: "Stick Pro",
        desc: "Stick profesional de alta resistencia.",
        estado: 5,
        club: "Raptors",
        pista: "Pista Central"
      },
      "Casco X": {
        img: "https://via.placeholder.com/400x300?text=Casco+X",
        nombre: "Casco X",
        desc: "Casco con tecnolog√≠a de absorci√≥n de impacto.",
        estado: 4,
        club: "Avalancha",
        pista: "Pista Norte"
      },
      "Guantes Y": {
        img: "https://via.placeholder.com/400x300?text=Guantes+Y",
        nombre: "Guantes Y",
        desc: "Guantes resistentes y ergon√≥micos.",
        estado: 3,
        club: "Rinos",
        pista: "Pista Sur"
      }
    };

    const params = new URLSearchParams(window.location.search);
    const nombre = decodeURIComponent(params.get("nombre") || "");
    const item = data[nombre];

    if (item) {
      document.getElementById("nombre").textContent = item.nombre;
      document.getElementById("desc").textContent = item.desc;
      document.getElementById("club").textContent = item.club;
      document.getElementById("pista").textContent = item.pista;
      document.getElementById("main-img").src = item.img;
      document.getElementById("stars").textContent =
        "‚≠ê".repeat(item.estado) + "‚òÜ".repeat(5 - item.estado);
    }

    function publicarComentario() {
      const texto = document.getElementById("comentario").value.trim();
      if (texto) {
        const div = document.createElement("div");
        div.className = "comment-item";
        div.textContent = texto;
        document.getElementById("comentarios-publicados").prepend(div);
        document.getElementById("comentario").value = "";
      }
    }

    fetch('navbar.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById("navbar-container").innerHTML = html;

        // Personalizar seg√∫n el usuario
        const username = localStorage.getItem("usuario");
        const userNav = document.getElementById("user-nav");
        if (userNav) {
          if (username) {
            userNav.innerHTML = `üë§ ${username}
              <a href="nuevo.html" style="margin-left:1rem; color:#b71c1c; font-weight:bold;">+ Nuevo</a>
              <a href="#" onclick="logout()" style="margin-left:1rem; color:#b71c1c;">Cerrar sesi√≥n</a>`;
          } else {
            userNav.innerHTML = `<a href="login.html" style="color:#b71c1c; font-weight:bold;">Login</a>`;
          }
        }
      });

    function logout() {
      localStorage.removeItem("usuario");
      location.reload();
    }
  </script>

</body>
</html>
